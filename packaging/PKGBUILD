# Maintainer: Adis Durakovic
pkgname=resticity
pkgver=1.0.0
pkgrel=1
epoch=
pkgdesc="A frontend for restic"
arch=("any")
url="https://github.com/ad-on-is/resticity"
license=('GPL3')
groups=()
depends=(go nodejs restic webkit2gtk)
makedepends=()
checkdepends=()
optdepends=()
provides=(resticity)
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
source=("$url/archive/refs/tags/$pkgver.tar.gz")
noextract=()
sha256sums=("3ee648e54e324bfea8b55cdbe5a8f625ac00839a68e1bd96628285bf896e9754")
validpgpkeys=()

prepare() {
        cd "$pkgname-$pkgver"
        go install github.com/wailsapp/wails/v2/cmd/wails@latest
}

build() {
        cd "$pkgname-$pkgver"
        wails build
}

check() {
        cd "$pkgname-$pkgver"
        
}

package() {
        cd "$pkgname-$pkgver"
        install -Dm755 --no-target-directory "build/bin/resticity" "${pkgdir}/usr/bin/${pkgname}"
        install -Dm755 --no-target-directory "frontend/public/appicon.png" "${pkgdir}/usr/share/icons/hicolor/256x256/apps/${pkgname}.png"
        install -Dm755 --no-target-directory "com.github.ad-on-is.Resticity.desktop" "${pkgdir}/usr/share/applications/${pkgname}.desktop"
}